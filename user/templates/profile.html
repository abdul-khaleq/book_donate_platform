{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}


<a href="{%url 'profile_update'%}">
  <h1>Update your profile</h1>
</a>

<div class="container py-3">
  <h4>Total book found: {{books|length}}</h4>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for book in books%}
    <div class="col">
      <div class="card h-100">
        <img src="{{book.image.url}}" class="card-img-top" alt="{{book.title}}">
        <div class="card-body">
          <h5 class="card-title">Title: {{book.title}}</h5>
          <p class="card-text">Author: {{book.author}}</p>
          <a href="{% url 'update_donate_book' book.id%}" class="btn btn-primary">Edit book</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>



<div class="container py-3">
  <h4>Total gifts found: {{gifts|length}}</h4>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for gift in gifts%}
    <div class="col">
      <div class="card h-100">
        <img src="{{gift.gift.image.url}}" class="card-img-top" alt="{{book.gift.name}}">
        <div class="card-body">
          <h5 class="card-title">Coins required: {{gift.gift.coins_required}}</h5>
          <h5 class="card-title"> Quantity: {{gift.gift.quantity}}</h5>
          <h5 class="card-title">{{gift.gift.name}}</h5>
          <p class="card-text">{{gift.gift.description}}</p>
          {% comment %} <a href="{% url 'redeem_gift' gift.id%}" class="btn btn-primary">Redeem</a> {% endcomment %}
          <a href="{% url 'redeem_gift' gift.id %}"
            class="btn btn-primary {% if request.user.user.coins < gift.coins_required %} disabled{% endif %}">Redeem</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock content %}